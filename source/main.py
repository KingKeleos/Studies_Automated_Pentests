# Imports from external packages
from absl import app
from absl import flags
import re
import os

# Imports of internal packages
from documentation import logger
from reconnaisance.gathering import gatherer
from threatModdeling import modelling
from exploitation import exploit
from reporting import reporter

# main is the Main-Function that is the starting point of the program
def main():
    print("| --- Starting WebPenTest Guide --- |")
    print("| --- Preparation already done? --- |")
    print("! --- This program cannot take over the Pre-Egnagement Phase --- !")
    logger.cleanFile()
    reporter.cleanReport()
    ans = input("Pre-Engagement done? (y/n): ")
    if ans=="yes" or ans == "y":
        print("| --- Starting with next step: Reconnaissance:")
        logger.log("Starting the Tool, after Pre-Engagement was done.", "Pre Egnagement")
        print("____________________________________________________")
        gatherer.runChecks()
        print("| --- Going over to next phase: Threat-Modelling:")
        modelling.runChecks()
        print("| --- Going over to next phase: Exploitation:")
        exploit.runChecks()
        print("| --- Went over all phases, doing the reporting in: report/report.md")
        name = input("What's yout name for the report: ")
        website = input("What website did you test: ")
        reporter.createReport(name, website)


if __name__ == "__main__":
    main()