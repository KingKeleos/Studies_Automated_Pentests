from absl import app
from absl import flags
import re

from documentation import logger

# Pattern to match, in order to check whether input is valid IP or not.
ipPattern = "^(?:[0-9]{1,3}\.){3}[0-9]{1,3}"

# Setup flags, so the user can set up required arguments
FLAGS = flags.FLAGS
flags.DEFINE_string("target", None, "[Required] The targets IP address. Has to be in the Regex Format of an IP, "
                                    "or it will fail",
                    required=True)
flags.DEFINE_string("logs", "../documentation/results.log", "Location for the result log. You can set a path for it, "
                                                            "or the default will be used.")


def main(argv):
    if FLAGS.target == "":
        print("No target was set, please try again")
        return
    if not re.match(pattern=ipPattern, string=FLAGS.target):
        print("The pattern did not match to an IP-Address please try again")
        return
    print("target defined as: %s!" % FLAGS.target)
    logger.log("Initiating logs for testing the website running at %s" % FLAGS.target, "Initiation")


if __name__ == "__main__":
    app.run(main)